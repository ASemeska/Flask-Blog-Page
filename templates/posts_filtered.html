{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
	<div class="alert alert-warning alert-dismissible fade show" role="alert">
	  {{ message }}
	  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
{% endfor %}

<h1>Categories: </h1>
<br>

<div class="shadow p-3 mb-5 bg-body rounded">
	<form method="POST">
		{{ form.hidden_tag() }}
		{{ form.title.label(class="form-label") }}
		{{ form.title(class="form-control") }}


		<br/>
		{{ form.submit(class="btn btn-secondary") }}
    <a href="{{url_for('posts')}}" class="btn btn-secondary">Clear Search</a>


	</form>
</div>


{% for post in posts %}

  <div class="shadow p-3 mb-5 bg-body rounded">
    {% if post.category_title == "" %}
      <h1>{{post.title}}</h1>
      By: {{post.author}} | Added on: {{post.date_added}} | Category: Uncategorized
      <br>
      {{post.content}} 
      <br><br>
      <a href="{{url_for('edit_post', id = post.id)}}" class="btn btn-outline-secondary btn-sm">Edit Post</a>
      <a href="{{url_for('delete_post', id = post.id)}}" class="btn btn-outline-danger btn-sm">Delete Post</a>
      {% else %}
      <h1>{{post.title}}</h1>
      By: {{post.author}} | Added on: {{post.date_added}} | Category: {{post.category_title}}
      <br>
      {{post.content}} 
      <br><br>
      <a href="{{url_for('edit_post', id = post.id)}}" class="btn btn-outline-secondary btn-sm">Edit Post</a>
      <a href="{{url_for('delete_post', id = post.id)}}" class="btn btn-outline-danger btn-sm">Delete Post</a>
      {% endif %}
    </div>
{% endfor %}

{% endblock %}